name: Metrics

on:
  schedule: [{ cron: "0 0 * * *" }] # daily update (UTC 00:00)
  workflow_dispatch:
  push:
    branches: ["master", "main"]

permissions:
  contents: write

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    steps:
      - uses: lowlighter/metrics@latest
        with:
          # Required: create a PAT and save as repo secret METRICS_TOKEN
          # Recommended scopes: "public_repo" (or "repo" if you want private stats), "read:user"
          token: ${{ secrets.METRICS_TOKEN }}

          # Your profile
          user: Liam-Frost
          config_timezone: America/Vancouver

          # Commit behavior
          committer_message: "chore(metrics): update profile metrics"

          # Template + base sections (clean, engineering-friendly)
          template: classic
          base: header, activity, community, repositories, metadata

          # ---- Plugins (engineering-optimized) ----

          # Short intro block (who you are)
          plugin_introduction: yes

          # Language stats (accurate + useful)
          plugin_languages: yes
          plugin_languages_details: bytes-size, percentage
          plugin_languages_indepth: yes
          plugin_languages_limit: 8
          plugin_languages_sections: most-used
          plugin_languages_analysis_timeout: 15

          # Lines of code & activity trends (lightweight, recruiter-friendly)
          plugin_lines: yes
          plugin_lines_sections: base

          # Calendar-style contribution summary (2D, fast, stable)
          plugin_calendar: yes
          plugin_calendar_limit: 1

          # Repository overview signals (pin-quality hints)
          plugin_repositories: yes
          plugin_repositories_featured: ""   # keep empty; README pinned cards handle featuring
          plugin_repositories_order: featured, pinned, starred, random
          plugin_repositories_pinned: 2

          # Optional: show recent activity (PRs/issues/commits) without being noisy
          plugin_activity: yes
          plugin_activity_limit: 5
          plugin_activity_days: 14
          plugin_activity_filter: all
          plugin_activity_visibility: all

          # ---- Hard exclusions (avoid “template-account” vibe / heavy compute) ----
          plugin_achievements: no
          plugin_habits: no
          plugin_skyline: no
          plugin_stargazers: no
          plugin_topics: no
          plugin_licenses: no
          plugin_support: no
